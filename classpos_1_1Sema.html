<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>picoos-oo: pos::Sema Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">picoos-oo
   &#160;<span id="projectnumber">1.xxxx</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacepos.html">pos</a></li><li class="navelem"><a class="el" href="classpos_1_1Sema.html">Sema</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">pos::Sema Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="picoos-sema_8hxx_source.html">picoos-sema.hxx</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for pos::Sema:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classpos_1_1Sema.png" usemap="#pos::Sema_map" alt=""/>
  <map id="pos::Sema_map" name="pos::Sema_map">
<area href="classnos_1_1Sema.html" alt="nos::Sema" shape="rect" coords="0,56,69,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af6e795f837d22914df8d763734984ed4"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#acd71b9176e3754a87ca57fc06931e0de">VAR_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpos_1_1Sema.html#af6e795f837d22914df8d763734984ed4">create</a> (<a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#af1120d55cc63eb13f916aeaa0c651845">INT_t</a> initcount)</td></tr>
<tr class="separator:af6e795f837d22914df8d763734984ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a281fac47ff1f6c1d5e79a140147816d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpos_1_1Sema.html#a281fac47ff1f6c1d5e79a140147816d4">destroy</a> ()</td></tr>
<tr class="separator:a281fac47ff1f6c1d5e79a140147816d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebabd0ec46d668c7cbde8ef7c292f99"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#acd71b9176e3754a87ca57fc06931e0de">VAR_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpos_1_1Sema.html#abebabd0ec46d668c7cbde8ef7c292f99">get</a> ()</td></tr>
<tr class="separator:abebabd0ec46d668c7cbde8ef7c292f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ada2095d92abb82eacc09f20a0dc4b"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#acd71b9176e3754a87ca57fc06931e0de">VAR_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpos_1_1Sema.html#ae4ada2095d92abb82eacc09f20a0dc4b">signal</a> ()</td></tr>
<tr class="separator:ae4ada2095d92abb82eacc09f20a0dc4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae126e524bf6fac0827a58106e4f8e0c4"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#acd71b9176e3754a87ca57fc06931e0de">VAR_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpos_1_1Sema.html#ae126e524bf6fac0827a58106e4f8e0c4">wait</a> (<a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#a17133269bf6f77fd6b3523d894076dbe">UINT_t</a> timeoutticks)</td></tr>
<tr class="separator:ae126e524bf6fac0827a58106e4f8e0c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Semaphores are basically used for task synchronization. <a class="el" href="classpos_1_1Task.html">Task</a> synchronization means that only a defined number of tasks can execute a piece of code. Usually, a semaphore is initialized with the value 1, so only one task can hold the semaphore at a time (Please read the chapter about the mutex functions also if you are interested in task synchronization).<br/>
 The second thing semaphores can be used for is sending signals to waiting tasks. Imagine you have an interrupt service routine that is triggered every time when a big chunk of data is available on a device. The data is to big to process them directly in the ISR. The ISR will only trigger a semaphore (it will signalize the semaphore), and a high priorized task waiting for the semaphore will be set to running state and will process the data from the device. In this case, the semaphore would be initialized with zero when it is created. The first task requesting the semaphore would block immediately, and can only proceed its work when the semaphore is triggered from outside.<br/>
</p>
<p>Semaphores are implemented as counters. A task requesting a semaphore (via <a class="el" href="classpos_1_1Sema.html#abebabd0ec46d668c7cbde8ef7c292f99">pos::Sema::get</a> or <a class="el" href="classpos_1_1Sema.html#ae126e524bf6fac0827a58106e4f8e0c4">pos::Sema::wait</a>) will decrement the counter. If the counter is zero, the task willing to decrement the counter is blocked. When a semaphore is signaled (via <a class="el" href="classpos_1_1Sema.html#ae4ada2095d92abb82eacc09f20a0dc4b">pos::Sema::signal</a>), the counter is incremented. If the counter reaches a positive, nonzero value, the highest priorized task pending on the semaphore is set to running state and can decrement the counter by itself. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af6e795f837d22914df8d763734984ed4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#acd71b9176e3754a87ca57fc06931e0de">VAR_t</a> pos::Sema::create </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#af1120d55cc63eb13f916aeaa0c651845">INT_t</a>&#160;</td>
          <td class="paramname"><em>initcount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allocates a new semaphore object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initcount</td><td>Initial semaphore count (see detailed semaphore description). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>semaphore creation status. -1 is returned when the semaphore could not be created. </dd></dl>
<dl class="section note"><dt>Note</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__feature.html#gacfdbd819c39a16ed014220c7a09449be">POSCFG_FEATURE_SEMAPHORES</a> must be defined to 1 to have semaphore support compiled in. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__sema.html#gaac4e42d09c444b7da1f55724e9713e90">posSemaCreate</a>, <a class="el" href="classpos_1_1Sema.html#a281fac47ff1f6c1d5e79a140147816d4">destroy</a>, <a class="el" href="classpos_1_1Sema.html#abebabd0ec46d668c7cbde8ef7c292f99">get</a>, <a class="el" href="classpos_1_1Sema.html#ae126e524bf6fac0827a58106e4f8e0c4">wait</a>, <a class="el" href="classpos_1_1Sema.html#ae4ada2095d92abb82eacc09f20a0dc4b">signal</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a281fac47ff1f6c1d5e79a140147816d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void pos::Sema::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Frees a no more needed semaphore object. </p>
<dl class="section note"><dt>Note</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__feature.html#gacfdbd819c39a16ed014220c7a09449be">POSCFG_FEATURE_SEMAPHORES</a> must be defined to 1 to have semaphore support compiled in.<br/>
 <a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__feature.html#gaba45028573a2028c529ad4a83de09c1e">POSCFG_FEATURE_SEMADESTROY</a> must be defined to 1 to have this function compiled in. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__sema.html#gaa90a21c0fef372c7ee8c361a1f697136">posSemaDestroy</a>, <a class="el" href="classpos_1_1Sema.html#af6e795f837d22914df8d763734984ed4">create</a> </dd></dl>

</div>
</div>
<a class="anchor" id="abebabd0ec46d668c7cbde8ef7c292f99"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#acd71b9176e3754a87ca57fc06931e0de">VAR_t</a> pos::Sema::get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function tries to get the semaphore object. If the semaphore is in nonsignalized state (that means its counter is zero or less), this function blocks the task execution until the semaphore gets signaled. </p>
<dl class="section return"><dt>Returns</dt><dd>zero on success. </dd></dl>
<dl class="section note"><dt>Note</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__feature.html#gacfdbd819c39a16ed014220c7a09449be">POSCFG_FEATURE_SEMAPHORES</a> must be defined to 1 to have semaphore support compiled in. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__sema.html#ga507d0b02a370832a6699dc5d01d8d032">posSemaGet</a>, <a class="el" href="classpos_1_1Sema.html#ae126e524bf6fac0827a58106e4f8e0c4">wait</a>, <a class="el" href="classpos_1_1Sema.html#ae4ada2095d92abb82eacc09f20a0dc4b">signal</a>, <a class="el" href="classpos_1_1Sema.html#af6e795f837d22914df8d763734984ed4">create</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ae4ada2095d92abb82eacc09f20a0dc4b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#acd71b9176e3754a87ca57fc06931e0de">VAR_t</a> pos::Sema::signal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function signalizes a semaphore object, that means it increments the semaphore counter and sets tasks pending on the semaphore to running state, when the counter reaches a positive, nonzero value. </p>
<dl class="section return"><dt>Returns</dt><dd>zero on success. </dd></dl>
<dl class="section note"><dt>Note</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__feature.html#gacfdbd819c39a16ed014220c7a09449be">POSCFG_FEATURE_SEMAPHORES</a> must be defined to 1 to have semaphore support compiled in. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__sema.html#ga58e7b2848b028c115e458d2137d2a858">posSemaSignal</a>, <a class="el" href="classpos_1_1Sema.html#abebabd0ec46d668c7cbde8ef7c292f99">get</a>, <a class="el" href="classpos_1_1Sema.html#ae126e524bf6fac0827a58106e4f8e0c4">wait</a>, <a class="el" href="classpos_1_1Sema.html#af6e795f837d22914df8d763734984ed4">create</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ae126e524bf6fac0827a58106e4f8e0c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#acd71b9176e3754a87ca57fc06931e0de">VAR_t</a> pos::Sema::wait </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#a17133269bf6f77fd6b3523d894076dbe">UINT_t</a>&#160;</td>
          <td class="paramname"><em>timeoutticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function tries to get the semaphore object. If the semaphore is in nonsignalized state (that means its counter is zero or less), this function blocks the task execution until the semaphore gets signaled or a timeout happens. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeoutticks</td><td>timeout in timer ticks (see <a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__coreset.html#ga8489802eaedf42fdb5f2ce1708eaffa2">HZ</a> define and <a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#af922d1d7fb6384695d25c7a66a3bf8f1">MS</a> macro). If this parameter is set to zero, the function immediately returns. If this parameter is set to INFINITE, the function will never time out. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero on success. A positive value (1 or TRUE) is returned when the timeout was reached. </dd></dl>
<dl class="section note"><dt>Note</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__feature.html#gacfdbd819c39a16ed014220c7a09449be">POSCFG_FEATURE_SEMAPHORES</a> must be defined to 1 to have semaphore support compiled in.<br/>
 <a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__feature.html#ga84a7fb0513fbca0be5f8e1e90bdda4b2">POSCFG_FEATURE_SEMAWAIT</a> must be defined to 1 to have this function compiled in. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__sema.html#ga092d90aab80866f76c6b5dec7f4ef631">posSemaWait</a>, <a class="el" href="classpos_1_1Sema.html#abebabd0ec46d668c7cbde8ef7c292f99">get</a>, <a class="el" href="classpos_1_1Sema.html#ae4ada2095d92abb82eacc09f20a0dc4b">signal</a>, <a class="el" href="classpos_1_1Sema.html#af6e795f837d22914df8d763734984ed4">create</a>, <a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/group__coreset.html#ga8489802eaedf42fdb5f2ce1708eaffa2">HZ</a>, <a class="elRef" doxygen="picoos.tag:../picoos/" href="../picoos/picoos_8h.html#af922d1d7fb6384695d25c7a66a3bf8f1">MS</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Nov 10 2013 17:53:24 for picoos-oo by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
